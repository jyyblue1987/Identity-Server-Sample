O:20:"FileSystemCacheValue":5:{s:3:"key";O:18:"FileSystemCacheKey":2:{s:3:"key";s:48:"sample_reports/sqlsvr/drilldown/rep-programs.sql";s:5:"group";s:14:"report_headers";}s:5:"value";a:14:{s:7:"Filters";a:0:{}s:9:"Variables";a:1:{s:4:"terr";a:6:{s:4:"name";s:4:"terr";s:7:"display";s:9:"Territory";s:4:"type";s:4:"text";s:5:"empty";b:0;s:8:"multiple";b:0;s:6:"format";s:11:"Y-m-d H:i:s";}}s:8:"Includes";a:0:{}s:4:"Name";s:28:"All Programs For a Territory";s:11:"Description";s:73:"
This is a drilldown report that lists all programs for a given territory";s:4:"Type";s:6:"SqlSvr";s:8:"Database";s:6:"sqlsvr";s:11:"Environment";s:4:"main";s:12:"Environments";a:1:{i:0;a:2:{s:4:"name";s:4:"main";s:8:"selected";b:1;}}s:15:"Query_Formatted";s:14063:"<pre class='prettyprint linenums lang-sql'><span style="font-weight:bold;">SELECT</span> 
  <span style="color: #333;">PROGRAM</span><span >.</span><span style="color: #333;">PROGRAMID</span><span >,</span> 
  <span style="color: #333;">PROGRAM</span><span >.</span><span style="color: #333;">PROGDATE</span> <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Program Date'</span><span >,</span> 
  <span style="color: #333;">L</span><span >.</span><span style="color: #333;">VENDOR</span> <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Location'</span><span >,</span> 
  <span style="color: #333;">L</span><span >.</span><span style="color: #333;">LCITY</span> <span style="font-weight:bold;">as</span> <span style="color: blue;">'Loc City'</span><span >,</span> 
  <span style="color: #333;">L</span><span >.</span><span style="color: #333;">LSTATE</span> <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Loc St'</span><span >,</span> 
  <span style="color: #333;">B</span><span >.</span><span style="color: #333;">REPFN</span> <span >+</span> <span style="color: blue;">' '</span> <span >+</span> <span style="color: #333;">B</span><span >.</span><span style="color: #333;">REPLN</span> <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Rep Name'</span><span >,</span> 
  <span style="color: #333;">B</span><span >.</span><span style="color: #333;">Territory</span><span >,</span> 
  <span style="font-weight:bold;">IsNull</span>(<span style="color: #333;">Reps</span><span >.</span><span style="color: #333;">REPADD</span><span >,</span> <span style="color: blue;">'n/a'</span>) <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Rep Addr'</span><span >,</span> 
  <span style="font-weight:bold;">IsNull</span>(<span style="color: #333;">Reps</span><span >.</span><span style="color: #333;">REPCITY</span><span >,</span> <span style="color: blue;">''</span>) <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Rep City'</span><span >,</span> 
  <span style="font-weight:bold;">IsNull</span>(<span style="color: #333;">Reps</span><span >.</span><span style="color: #333;">REPSTATE</span><span >,</span> <span style="color: blue;">''</span>) <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Rep St'</span><span >,</span> 
  <span style="font-weight:bold;">IsNull</span>(<span style="color: #333;">Reps</span><span >.</span><span style="color: #333;">REPZIP</span><span >,</span> <span style="color: blue;">''</span>) <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Rep Zip'</span><span >,</span> 
  <span style="color: #333;">Reps</span><span >.</span><span style="color: #333;">REPPHONE</span> <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Rep Phone'</span><span >,</span> 
  <span style="color: #333;">Reps</span><span >.</span><span style="color: #333;">REPEMAIL</span> <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Rep Email'</span><span >,</span> 
  <span style="color: #333;">K</span><span >.</span><span style="color: #333;">spkrfn</span> <span >+</span> <span style="color: blue;">' '</span> <span >+</span> <span style="color: #333;">K</span><span >.</span><span style="color: #333;">spkrln</span> <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Speaker'</span><span >,</span> 
  <span style="color: #333;">K</span><span >.</span><span style="color: #333;">SpkrCounter</span> <span style="font-weight:bold;">AS</span> <span style="color: blue;">'SpkrCounter'</span> 
<span style="font-weight:bold;">FROM</span> 
  <span style="color: #333;">Program</span> 
  <span style="font-weight:bold;">LEFT JOIN</span> <span style="color: #333;">Budget</span> <span style="color: #333;">B</span> <span style="font-weight:bold;">ON</span> <span style="color: #333;">PROGRAM</span><span >.</span><span style="color: #333;">PROGRAMID</span> <span >=</span> <span style="color: #333;">B</span><span >.</span><span style="color: #333;">PROGRAMID</span> 
  <span style="font-weight:bold;">LEFT JOIN</span> <span style="color: #333;">Location_Info</span> <span style="color: #333;">L</span> <span style="font-weight:bold;">ON</span> <span style="color: #333;">PROGRAM</span><span >.</span><span style="color: #333;">PROGRAMID</span> <span >=</span> <span style="color: #333;">L</span><span >.</span><span style="color: #333;">PROGRAMID</span> 
  <span style="font-weight:bold;">LEFT JOIN</span> <span style="color: #333;">TBLSPEAKERS</span> <span style="color: #333;">K</span> <span style="font-weight:bold;">ON</span> <span style="color: #333;">PROGRAM</span><span >.</span><span style="color: #333;">PROGRAMID</span> <span >=</span> <span style="color: #333;">K</span><span >.</span><span style="color: #333;">PROGRAMID</span> 
  <span style="font-weight:bold;">JOIN</span> <span style="color: #333;">dbo</span><span >.</span><span style="color: #333;">Territory_Reps</span> <span style="color: #333;">Reps</span> <span style="font-weight:bold;">ON</span> <span style="color: #333;">B</span><span >.</span><span style="color: #333;">TERRITORY</span> <span >=</span> <span style="color: #333;">REPS</span><span >.</span><span style="color: #333;">TERR</span> <span style="color: #aaa;">--LEFT JOIN   GETFROMTBLSPEAKERSORCALLLISTORTBA C</span>
  <span style="color: #aaa;">--      ON PROGRAM.PROGRAMID = C.PROGRAMID</span>
<span style="font-weight:bold;">WHERE</span> 
  <span style="color: #aaa;">--PROGRAM.PROGRAMID = COALESCE(@ProgramID,PROGRAM.PROGRAMID)</span>
  <span style="color: #aaa;">--AND B.Territory = COALESCE(@Terr,B.Territory)</span>
  <span style="color: #333;">PROGRAM</span><span >.</span><span style="color: #333;">CANCELLED</span> <span >=</span> <span style="color: green;">0</span> 
  <span style="font-weight:bold;">AND</span> <span style="color: #333;">B</span><span >.</span><span style="color: #333;">HOSTREP</span> <span >=</span> <span style="color: green;">1</span> 
  <span style="font-weight:bold;">AND</span> <span style="color: #333;">L</span><span >.</span><span style="color: #333;">CATEGORY</span> <span >=</span> <span style="color: blue;">'Program Location'</span> 
  <span style="font-weight:bold;">AND</span> <span style="color: #333;">K</span><span >.</span><span style="color: #333;">ID</span> <span >=</span> (
    <span style="font-weight:bold;">SELECT</span> 
      <span style="font-weight:bold;">MIN</span>(<span style="color: #333;">TBLSPEAKERS</span><span >.</span><span style="color: #333;">ID</span>) 
    <span style="font-weight:bold;">FROM</span> 
      <span style="color: #333;">TBLSPEAKERS</span> 
    <span style="font-weight:bold;">WHERE</span> 
      <span style="color: #333;">TBLSPEAKERS</span><span >.</span><span style="color: #333;">PROGRAMID</span> <span >=</span> <span style="color: #333;">PROGRAM</span><span >.</span><span style="color: #333;">PROGRAMID</span>
  ) 
<span style="font-weight:bold;">ORDER BY</span> 
  <span style="color: #333;">PROGRAM</span><span >.</span><span style="color: #333;">PROGRAMID</span> 
<span style="font-weight:bold;">SELECT</span> 
  <span style="color: #333;">PROGRAM</span><span >.</span><span style="color: #333;">PROGRAMID</span><span >,</span> 
  <span style="color: #333;">PROGRAM</span><span >.</span><span style="color: #333;">PROGDATE</span> <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Program Date'</span><span >,</span> 
  <span style="color: #333;">L</span><span >.</span><span style="color: #333;">VENDOR</span> <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Location'</span><span >,</span> 
  <span style="color: #333;">L</span><span >.</span><span style="color: #333;">LCITY</span> <span style="font-weight:bold;">as</span> <span style="color: blue;">'Loc City'</span><span >,</span> 
  <span style="color: #333;">L</span><span >.</span><span style="color: #333;">LSTATE</span> <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Loc St'</span><span >,</span> 
  <span style="color: #333;">B</span><span >.</span><span style="color: #333;">REPFN</span> <span >+</span> <span style="color: blue;">' '</span> <span >+</span> <span style="color: #333;">B</span><span >.</span><span style="color: #333;">REPLN</span> <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Rep Name'</span><span >,</span> 
  <span style="color: #333;">B</span><span >.</span><span style="color: #333;">Territory</span><span >,</span> 
  <span style="font-weight:bold;">IsNull</span>(<span style="color: #333;">Reps</span><span >.</span><span style="color: #333;">REPADD</span><span >,</span> <span style="color: blue;">'n/a'</span>) <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Rep Addr'</span><span >,</span> 
  <span style="font-weight:bold;">IsNull</span>(<span style="color: #333;">Reps</span><span >.</span><span style="color: #333;">REPCITY</span><span >,</span> <span style="color: blue;">''</span>) <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Rep City'</span><span >,</span> 
  <span style="font-weight:bold;">IsNull</span>(<span style="color: #333;">Reps</span><span >.</span><span style="color: #333;">REPSTATE</span><span >,</span> <span style="color: blue;">''</span>) <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Rep St'</span><span >,</span> 
  <span style="font-weight:bold;">IsNull</span>(<span style="color: #333;">Reps</span><span >.</span><span style="color: #333;">REPZIP</span><span >,</span> <span style="color: blue;">''</span>) <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Rep Zip'</span><span >,</span> 
  <span style="color: #333;">Reps</span><span >.</span><span style="color: #333;">REPPHONE</span> <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Rep Phone'</span><span >,</span> 
  <span style="color: #333;">Reps</span><span >.</span><span style="color: #333;">REPEMAIL</span> <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Rep Email'</span><span >,</span> 
  <span style="color: #333;">K</span><span >.</span><span style="color: #333;">spkrfn</span> <span >+</span> <span style="color: blue;">' '</span> <span >+</span> <span style="color: #333;">K</span><span >.</span><span style="color: #333;">spkrln</span> <span style="font-weight:bold;">AS</span> <span style="color: blue;">'Speaker'</span><span >,</span> 
  <span style="color: #333;">K</span><span >.</span><span style="color: #333;">SpkrCounter</span> <span style="font-weight:bold;">AS</span> <span style="color: blue;">'SpkrCounter'</span> 
<span style="font-weight:bold;">FROM</span> 
  <span style="color: #333;">Program</span> 
  <span style="font-weight:bold;">LEFT JOIN</span> <span style="color: #333;">Budget</span> <span style="color: #333;">B</span> <span style="font-weight:bold;">ON</span> <span style="color: #333;">PROGRAM</span><span >.</span><span style="color: #333;">PROGRAMID</span> <span >=</span> <span style="color: #333;">B</span><span >.</span><span style="color: #333;">PROGRAMID</span> 
  <span style="font-weight:bold;">LEFT JOIN</span> <span style="color: #333;">Location_Info</span> <span style="color: #333;">L</span> <span style="font-weight:bold;">ON</span> <span style="color: #333;">PROGRAM</span><span >.</span><span style="color: #333;">PROGRAMID</span> <span >=</span> <span style="color: #333;">L</span><span >.</span><span style="color: #333;">PROGRAMID</span> 
  <span style="font-weight:bold;">LEFT JOIN</span> <span style="color: #333;">TBLSPEAKERS</span> <span style="color: #333;">K</span> <span style="font-weight:bold;">ON</span> <span style="color: #333;">PROGRAM</span><span >.</span><span style="color: #333;">PROGRAMID</span> <span >=</span> <span style="color: #333;">K</span><span >.</span><span style="color: #333;">PROGRAMID</span> 
  <span style="font-weight:bold;">JOIN</span> <span style="color: #333;">dbo</span><span >.</span><span style="color: #333;">Territory_Reps</span> <span style="color: #333;">Reps</span> <span style="font-weight:bold;">ON</span> <span style="color: #333;">B</span><span >.</span><span style="color: #333;">TERRITORY</span> <span >=</span> <span style="color: #333;">REPS</span><span >.</span><span style="color: #333;">TERR</span> 
<span style="font-weight:bold;">WHERE</span> 
  <span style="color: #333;">B</span><span >.</span><span style="color: #333;">TERRITORY</span> <span >=</span> <span style="color: blue;">&quot;{{ terr }}&quot;</span> 
  <span style="font-weight:bold;">AND</span> <span style="color: #333;">PROGRAM</span><span >.</span><span style="color: #333;">CANCELLED</span> <span >=</span> <span style="color: green;">0</span> 
  <span style="font-weight:bold;">AND</span> <span style="color: #333;">B</span><span >.</span><span style="color: #333;">HOSTREP</span> <span >=</span> <span style="color: green;">1</span> 
  <span style="font-weight:bold;">AND</span> <span style="color: #333;">L</span><span >.</span><span style="color: #333;">CATEGORY</span> <span >=</span> <span style="color: blue;">'Program Location'</span> 
  <span style="font-weight:bold;">AND</span> <span style="color: #333;">K</span><span >.</span><span style="color: #333;">ID</span> <span >=</span> (
    <span style="font-weight:bold;">SELECT</span> 
      <span style="font-weight:bold;">MIN</span>(<span style="color: #333;">TBLSPEAKERS</span><span >.</span><span style="color: #333;">ID</span>) 
    <span style="font-weight:bold;">FROM</span> 
      <span style="color: #333;">TBLSPEAKERS</span> 
    <span style="font-weight:bold;">WHERE</span> 
      <span style="color: #333;">TBLSPEAKERS</span><span >.</span><span style="color: #333;">PROGRAMID</span> <span >=</span> <span style="color: #333;">PROGRAM</span><span >.</span><span style="color: #333;">PROGRAMID</span>
  ) 
<span style="font-weight:bold;">ORDER BY</span> 
  <span style="color: #333;">PROGRAM</span><span >.</span><span style="color: #333;">PROGRAMID</span></pre>";s:6:"report";s:48:"sample_reports/sqlsvr/drilldown/rep-programs.sql";s:3:"url";s:89:"http://reports.local/report/html/?report=sample_reports/sqlsvr/drilldown/rep-programs.sql";s:6:"is_dir";b:0;s:2:"Id";s:46:"samplereports_sqlsvr_drilldown_repprograms_sql";}s:3:"ttl";N;s:7:"expires";N;s:7:"created";i:1459439557;}